<!doctype html>
<html lang="es-MX">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* Esconde completamente o site até que o JavaScript conclua a verificação */
    html,
    body {
      visibility: hidden;
      /* Oculta todo o conteúdo */
      height: 100%;
      overflow: hidden;
      /* Impede que a página seja rolável */
      margin: 0;
      padding: 0;
    }
  </style>
  <script>
    const REDIRECT_URL = "https://manualdelmecanlco.vercel.app/";
    function isMobile() {
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      return /android|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent.toLowerCase());
    }
    // Código executa imediatamente (como no seu original)
    if (!isMobile()) {
      // DESKTOP → redireciona preservando UTMs
      window.location.href = REDIRECT_URL + window.location.search;
    } else {
      // MOBILE → verificar país
      fetch('https://ipapi.co/json/')
        .then(response => response.json())
        .then(data => {
          const isBrazil = data && data.country === "BR";

          if (isBrazil) {
            // MOBILE BR → redireciona preservando UTMs
            window.location.href = REDIRECT_URL + window.location.search;
          } else {
            // MOBILE fora do BR → libera conteúdo
            document.documentElement.style.visibility = "visible";
            document.body.style.visibility = "visible";
            document.body.style.overflow = "auto";
          }
        })
        .catch(error => {
          console.error("Erro ao verificar país:", error);
          // Em caso de falha → redireciona preservando UTMs
          window.location.href = REDIRECT_URL + window.location.search;
        });
    }
  </script>
  <title>El Código del Mecánico Profesional - Certificación</title>
  <meta name="description"
    content="El Código del Mecánico Profesional. Valida tus conocimientos y obtén tu certificado autenticado." />
  <meta name="theme-color" content="#ffffff" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Outfit:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <link rel="preload" as="image" href="/logo.svg">

  <!-- Meta Pixel Code -->
  <script>
    !function (f, b, e, v, n, t, s) {
      if (f.fbq) return; n = f.fbq = function () {
        n.callMethod ?
          n.callMethod.apply(n, arguments) : n.queue.push(arguments)
      };
      if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
      n.queue = []; t = b.createElement(e); t.async = !0;
      t.src = v; s = b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t, s)
    }(window, document, 'script',
      'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1389505576056235');
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=1389505576056235&ev=PageView&noscript=1" /></noscript>
  <!-- End Meta Pixel Code -->

  <!-- Microsoft Clarity -->
  <script type="text/javascript">
    (function (c, l, a, r, i, t, y) {
      c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
      t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
      y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
    })(window, document, "clarity", "script", "vhvh9xyygf");
  </script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z7199JS7C9"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-Z7199JS7C9');
  </script>

  <style>
    wistia-player[media-id='jhnp0kvf2f']:not(:defined) {
      background: center / contain no-repeat url('https://fast.wistia.com/embed/medias/jhnp0kvf2f/swatch');
      display: block;
      filter: blur(5px);
      padding-top: 177.78%;
    }
  </style>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>
</body>

</html>